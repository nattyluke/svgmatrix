// DOMMatrix v0.1.0 | thednp Â© 2022 | MIT-License
!function(t,m){"object"==typeof exports&&"undefined"!=typeof module?module.exports=m():"function"==typeof define&&define.amd?define(m):(t="undefined"!=typeof globalThis?globalThis:t||self).CSSMatrix=m()}(this,(function(){"use strict";function t(t){var m=new u,r=Array.from(t);if(!r.every((function(t){return!Number.isNaN(t)})))throw TypeError('CSSMatrix: "'+t+'" must only have numbers.');if(16===r.length){var e=r[0],n=r[1],i=r[2],o=r[3],a=r[4],s=r[5],f=r[6],c=r[7],l=r[8],p=r[9],y=r[10],v=r[11],h=r[12],d=r[13],w=r[14],b=r[15];m.m11=e,m.a=e,m.m21=a,m.c=a,m.m31=l,m.m41=h,m.e=h,m.m12=n,m.b=n,m.m22=s,m.d=s,m.m32=p,m.m42=d,m.f=d,m.m13=i,m.m23=f,m.m33=y,m.m43=w,m.m14=o,m.m24=c,m.m34=v,m.m44=b}else{if(6!==r.length)throw new TypeError("CSSMatrix: expecting an Array of 6/16 values.");var M=r[0],g=r[1],x=r[2],N=r[3],S=r[4],A=r[5];m.m11=M,m.a=M,m.m12=g,m.b=g,m.m21=x,m.c=x,m.m22=N,m.d=N,m.m41=S,m.e=S,m.m42=A,m.f=A}return m}function m(m){var r=Object.keys(new u);if("object"==typeof m&&r.every((function(t){return t in m})))return t([m.m11,m.m12,m.m13,m.m14,m.m21,m.m22,m.m23,m.m24,m.m31,m.m32,m.m33,m.m34,m.m41,m.m42,m.m43,m.m44]);throw TypeError('CSSMatrix: "'+JSON.stringify(m)+'" is not a DOMMatrix / CSSMatrix / JSON compatible object.')}function r(m){if("string"!=typeof m)throw TypeError('CSSMatrix: "'+m+'" is not a string.');var r=String(m).replace(/\s/g,""),e=new u,n='CSSMatrix: invalid transform string "'+m+'"';return r.split(")").filter((function(t){return t})).forEach((function(m){var r=m.split("("),i=r[0],o=r[1];if(!o)throw TypeError(n);var a=o.split(",").map((function(t){return t.includes("rad")?parseFloat(t)*(180/Math.PI):parseFloat(t)})),s=a[0],u=a[1],f=a[2],c=a[3],l=[s,u,f],p=[s,u,f,c];if("perspective"===i&&s&&[u,f].every((function(t){return void 0===t})))e.m34=-1/s;else if(i.includes("matrix")&&[6,16].includes(a.length)&&a.every((function(t){return!Number.isNaN(+t)}))){var y=a.map((function(t){return Math.abs(t)<1e-6?0:t}));e=e.multiply(t(y))}else if("translate3d"===i&&l.every((function(t){return!Number.isNaN(+t)})))e=e.translate(s,u,f);else if("translate"===i&&s&&void 0===f)e=e.translate(s,u||0,0);else if("rotate3d"===i&&p.every((function(t){return!Number.isNaN(+t)}))&&c)e=e.rotateAxisAngle(s,u,f,c);else if("rotate"===i&&s&&[u,f].every((function(t){return void 0===t})))e=e.rotate(0,0,s);else if("scale3d"===i&&l.every((function(t){return!Number.isNaN(+t)}))&&l.some((function(t){return 1!==t})))e=e.scale(s,u,f);else if("scale"!==i||Number.isNaN(s)||1===s||void 0!==f)if("skew"===i&&(s||!Number.isNaN(s)&&u)&&void 0===f)e=e.skew(s,u||0);else{if(!(/[XYZ]/.test(i)&&s&&[u,f].every((function(t){return void 0===t}))&&["translate","rotate","scale","skew"].some((function(t){return i.includes(t)}))))throw TypeError(n);if(["skewX","skewY"].includes(i))e=e[i](s);else{var v=i.replace(/[XYZ]/,""),h=i.replace(v,""),d=["X","Y","Z"].indexOf(h),w="scale"===v?1:0,b=[0===d?s:w,1===d?s:w,2===d?s:w];e=e[v].apply(e,b)}}else{var M=Number.isNaN(+u)?s:u;e=e.scale(s,M,1)}})),e}function e(t,m,r){var e=new u;return e.m41=t,e.e=t,e.m42=m,e.f=m,e.m43=r,e}function n(t,m,r){var e=new u,n=Math.PI/180,i=t*n,o=m*n,a=r*n,s=Math.cos(i),f=-Math.sin(i),c=Math.cos(o),l=-Math.sin(o),p=Math.cos(a),y=-Math.sin(a),v=c*p,h=-c*y;e.m11=v,e.a=v,e.m12=h,e.b=h,e.m13=l;var d=f*l*p+s*y;e.m21=d,e.c=d;var w=s*p-f*l*y;return e.m22=w,e.d=w,e.m23=-f*c,e.m31=f*y-s*l*p,e.m32=f*p+s*l*y,e.m33=s*c,e}function i(t,m,r,e){var n=new u,i=Math.sqrt(t*t+m*m+r*r);if(0===i)return n;var o=t/i,a=m/i,s=r/i,f=e*(Math.PI/360),c=Math.sin(f),l=Math.cos(f),p=c*c,y=o*o,v=a*a,h=s*s,d=1-2*(v+h)*p;n.m11=d,n.a=d;var w=2*(o*a*p+s*c*l);n.m12=w,n.b=w,n.m13=2*(o*s*p-a*c*l);var b=2*(a*o*p-s*c*l);n.m21=b,n.c=b;var M=1-2*(h+y)*p;return n.m22=M,n.d=M,n.m23=2*(a*s*p+o*c*l),n.m31=2*(s*o*p+a*c*l),n.m32=2*(s*a*p-o*c*l),n.m33=1-2*(y+v)*p,n}function o(t,m,r){var e=new u;return e.m11=t,e.a=t,e.m22=m,e.d=m,e.m33=r,e}function a(t,m){var r=new u;if(t){var e=t*Math.PI/180,n=Math.tan(e);r.m21=n,r.c=n}if(m){var i=m*Math.PI/180,o=Math.tan(i);r.m12=o,r.b=o}return r}function s(m,r){return t([r.m11*m.m11+r.m12*m.m21+r.m13*m.m31+r.m14*m.m41,r.m11*m.m12+r.m12*m.m22+r.m13*m.m32+r.m14*m.m42,r.m11*m.m13+r.m12*m.m23+r.m13*m.m33+r.m14*m.m43,r.m11*m.m14+r.m12*m.m24+r.m13*m.m34+r.m14*m.m44,r.m21*m.m11+r.m22*m.m21+r.m23*m.m31+r.m24*m.m41,r.m21*m.m12+r.m22*m.m22+r.m23*m.m32+r.m24*m.m42,r.m21*m.m13+r.m22*m.m23+r.m23*m.m33+r.m24*m.m43,r.m21*m.m14+r.m22*m.m24+r.m23*m.m34+r.m24*m.m44,r.m31*m.m11+r.m32*m.m21+r.m33*m.m31+r.m34*m.m41,r.m31*m.m12+r.m32*m.m22+r.m33*m.m32+r.m34*m.m42,r.m31*m.m13+r.m32*m.m23+r.m33*m.m33+r.m34*m.m43,r.m31*m.m14+r.m32*m.m24+r.m33*m.m34+r.m34*m.m44,r.m41*m.m11+r.m42*m.m21+r.m43*m.m31+r.m44*m.m41,r.m41*m.m12+r.m42*m.m22+r.m43*m.m32+r.m44*m.m42,r.m41*m.m13+r.m42*m.m23+r.m43*m.m33+r.m44*m.m43,r.m41*m.m14+r.m42*m.m24+r.m43*m.m34+r.m44*m.m44])}var u=function(){for(var t=[],m=arguments.length;m--;)t[m]=arguments[m];var r=this;if(r.a=1,r.b=0,r.c=0,r.d=1,r.e=0,r.f=0,r.m11=1,r.m12=0,r.m13=0,r.m14=0,r.m21=0,r.m22=1,r.m23=0,r.m24=0,r.m31=0,r.m32=0,r.m33=1,r.m34=0,r.m41=0,r.m42=0,r.m43=0,r.m44=1,t&&t.length){var e=[16,6].some((function(m){return m===t.length}))?t:t[0];return r.setMatrixValue(e)}return r},f={isIdentity:{configurable:!0},is2D:{configurable:!0}};f.isIdentity.get=function(){var t=this;return 1===t.m11&&0===t.m12&&0===t.m13&&0===t.m14&&0===t.m21&&1===t.m22&&0===t.m23&&0===t.m24&&0===t.m31&&0===t.m32&&1===t.m33&&0===t.m34&&0===t.m41&&0===t.m42&&0===t.m43&&1===t.m44},f.is2D.get=function(){var t=this;return 0===t.m31&&0===t.m32&&1===t.m33&&0===t.m34&&0===t.m43&&1===t.m44},u.prototype.setMatrixValue=function(e){return Array.isArray(e)?t(e):"object"==typeof e?m(e):"string"==typeof e&&e.length&&"none"!==e?r(e):this},u.prototype.toArray=function(t){var m=this;return t?[m.a,m.b,m.c,m.d,m.e,m.f]:[m.m11,m.m12,m.m13,m.m14,m.m21,m.m22,m.m23,m.m24,m.m31,m.m32,m.m33,m.m34,m.m41,m.m42,m.m43,m.m44]},u.prototype.toFloat32Array=function(t){return Float32Array.from(this.toArray(t))},u.prototype.toFloat64Array=function(t){return Float64Array.from(this.toArray(t))},u.prototype.toString=function(){var t=this.is2D;return(t?"matrix":"matrix3d")+"("+this.toFloat64Array(t).join(", ")+")"},u.prototype.toJSON=function(){var t=this,m=t.is2D,r=t.isIdentity;return Object.assign({},t,{is2D:m,isIdentity:r})},u.prototype.multiply=function(t){return s(this,t)},u.prototype.translate=function(t,m,r){var n=m,i=r;return void 0===i&&(i=0),void 0===n&&(n=0),s(this,e(t,n,i))},u.prototype.scale=function(t,m,r){var e=m,n=r;return void 0===e&&(e=t),void 0===n&&(n=1),s(this,o(t,e,n))},u.prototype.rotate=function(t,m,r){var e=t,i=m,o=r;return void 0===i&&(i=0),void 0===o&&(o=e,e=0),s(this,n(e,i,o))},u.prototype.rotateAxisAngle=function(t,m,r,e){if([t,m,r,e].some((function(t){return Number.isNaN(t)})))throw new TypeError("CSSMatrix: expecting 4 values");return s(this,i(t,m,r,e))},u.prototype.skewX=function(t){return s(this,a(t,0))},u.prototype.skewY=function(t){return s(this,a(0,t))},u.prototype.skew=function(t,m){return s(this,a(t,m))},u.prototype.transformPoint=function(t){var m=e(t.x,t.y,t.z);return m.m44=t.w||1,{x:(m=this.multiply(m)).m41,y:m.m42,z:m.m43,w:m.m44}},u.prototype.transform=function(t){var m=this,r=m.m11*t.x+m.m12*t.y+m.m13*t.z+m.m14*t.w,e=m.m21*t.x+m.m22*t.y+m.m23*t.z+m.m24*t.w,n=m.m31*t.x+m.m32*t.y+m.m33*t.z+m.m34*t.w,i=m.m41*t.x+m.m42*t.y+m.m43*t.z+m.m44*t.w;return{x:r/i,y:e/i,z:n/i,w:i}},Object.defineProperties(u.prototype,f),Object.assign(u,{Translate:e,Rotate:n,RotateAxisAngle:i,Scale:o,SkewX:function(t){return a(t,0)},SkewY:function(t){return a(0,t)},Skew:a,Multiply:s,fromArray:t,fromMatrix:m,fromString:r});return Object.assign(u,{Version:"0.1.0"}),u}));
